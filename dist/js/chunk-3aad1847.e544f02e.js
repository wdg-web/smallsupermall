(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3aad1847"],{"172d":function(t,e,a){},2426:function(t,e,a){},"3fd0":function(t,e,a){"use strict";a("2426")},"456d":function(t,e,a){var r=a("4bf8"),n=a("0d58");a("5eda")("keys",(function(){return function(t){return n(r(t))}}))},"4e7c":function(t,e,a){"use strict";a("7ab6")},"5eda":function(t,e,a){var r=a("5ca1"),n=a("8378"),c=a("79e5");t.exports=function(t,e){var a=(n.Object||{})[t]||Object[t],i={};i[t]=e(a),r(r.S+r.F*c((function(){a(1)})),"Object",i)}},"6f89":function(t,e,a){},"6fd8":function(t,e,a){"use strict";a("855d")},"7ab6":function(t,e,a){},"855d":function(t,e,a){},"8e6e":function(t,e,a){var r=a("5ca1"),n=a("990b"),c=a("6821"),i=a("11e9"),o=a("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,r=c(t),s=i.f,u=n(r),l={},f=0;while(u.length>f)a=s(r,e=u[f++]),void 0!==a&&o(l,e,a);return l}})},"990b":function(t,e,a){var r=a("9093"),n=a("2621"),c=a("cb7c"),i=a("7726").Reflect;t.exports=i&&i.ownKeys||function(t){var e=r.f(c(t)),a=n.f;return a?e.concat(a(t)):e}},"9a37":function(t,e,a){"use strict";a("6f89")},"9bd0":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,r){return a("div",{staticClass:"tab-control-item",class:{active:r===t.currentIndex},on:{click:function(e){return t.itemClick(r)}}},[a("span",[t._v(t._s(e))])])})),0)},n=[],c={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("tabClick",t)}}},i=c,o=(a("4e7c"),a("2877")),s=Object(o["a"])(i,r,n,!1,null,null,null);e["a"]=s.exports},bb51:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"category"}},[a("nav-bar",{staticClass:"nav-bar"},[a("div",{attrs:{slot:"center"},slot:"center"},[t._v("商品分类")])]),a("div",{staticClass:"content"},[a("tab-menu",{staticClass:"tab-menu",attrs:{categories:t.categories},on:{selectItem:t.selectItem}}),a("scroll",{ref:"scroll",attrs:{id:"tab-content",data:[t.categoryData],"probe-type":3},on:{scroll:t.contentScroll}},[a("div",[a("tab-content-category",{attrs:{subcategories:t.showSubcategory}}),a("tab-control",{attrs:{titles:["综合","新品","销量"]},on:{tabClick:t.tabClick}}),a("tab-content-detail",{attrs:{"category-detail":t.showCategoryDetail}})],1)])],1),a("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isshowBackTop,expression:"isshowBackTop"}],nativeOn:{click:function(e){return t.backClick(e)}}})],1)},n=[],c=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("a7ac"),o=a("fdd6"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("scroll",{attrs:{id:"tab-menu"}},[a("div",{staticClass:"menu-list"},t._l(t.categories,(function(e,r){return a("div",{key:r,staticClass:"menu-list-item",class:{active:r===t.currentIndex},on:{click:function(e){return t.itemClick(r)}}},[t._v("\n      "+t._s(e.title)+"\n    ")])})),0)])},u=[],l=a("5d17"),f={name:"TabMenu",components:{Scroll:l["a"]},props:{categories:Array},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("selectItem",t)}}},d=f,b=(a("e94c"),a("2877")),g=Object(b["a"])(d,s,u,!1,null,"36798b5c",null),p=g.exports,h=a("9bd0"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.subcategories.list?a("grid-view",{attrs:{cols:3,lineSpace:15,"v-margin":20}},t._l(t.subcategories.list,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("a",{attrs:{href:"javascript:;"}},[a("img",{staticClass:"item-img",attrs:{src:e.image,alt:""}}),a("div",{staticClass:"item-text"},[t._v(t._s(e.title))])])])})),0):t._e()],1)},m=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"gridView",staticClass:"grid-view"},[t._t("default")],2)},w=[],C=(a("c5f6"),{name:"GridView",props:{cols:{type:Number,default:2},hMargin:{type:Number,default:8},vMargin:{type:Number,default:8},itemSpace:{type:Number,default:8},lineSpace:{type:Number,default:8}},mounted:function(){setTimeout(this._autoLayout,20)},updated:function(){this._autoLayout()},methods:{_autoLayout:function(){var t=this.$refs.gridView,e=t.children;t.style.padding="".concat(this.vMargin,"px ").concat(this.hMargin,"px");for(var a=(t.clientWidth-2*this.hMargin-(this.cols-1)*this.itemSpace)/this.cols,r=0;r<e.length;r++){var n=e[r];n.style.width=a+"px",(r+1)%this.cols!==0&&(n.style.marginRight=this.itemSpace+"px"),r>=this.cols&&(n.style.marginTop=this.lineSpace+"px")}}}}),_=C,O=(a("9a37"),Object(b["a"])(_,v,w,!1,null,"58a324f6",null)),k=O.exports,x={name:"TabContentCategory",components:{GridView:k},props:{subcategories:{type:Object,default:function(){return[]}}}},D=x,j=(a("6fd8"),Object(b["a"])(D,y,m,!1,null,"05b1421d",null)),T=j.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("grid-view",t._l(t.categoryDetail,(function(t,e){return a("goods-list-item",{key:e,attrs:{"goods-item":t}})})),1)},I=[],$=a("9977"),B={name:"TabContentDetail",components:{GridView:k,GoodsListItem:$["a"]},props:{categoryDetail:{type:Array,default:function(){return[]}}}},P=B,E=Object(b["a"])(P,S,I,!1,null,"82af80be",null),M=E.exports,N=a("1bab");function Y(){return Object(N["a"])({url:"/category"})}function V(t){return Object(N["a"])({url:"/subcategory",params:{maitKey:t}})}function G(t,e){return Object(N["a"])({url:"/subcategory/detail",params:{miniWallkey:t,type:e}})}var L=a("b95e"),A=a("eecb");function K(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function W(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?K(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var F={name:"Category",components:{NavBar:i["a"],TabMenu:p,TabControl:h["a"],Scroll:l["a"],BackTop:o["a"],TabContentCategory:T,TabContentDetail:M},mixins:[A["c"]],data:function(){return{categories:[],categoryData:{},isshowBackTop:!1,tabOffsetTop:0,isTabFixed:!1,saveY:0,currentIndex:-1}},created:function(){this._getCategory()},computed:{showSubcategory:function(){return-1===this.currentIndex?{}:this.categoryData[this.currentIndex].subcategories},showCategoryDetail:function(){return-1===this.currentIndex?[]:this.categoryData[this.currentIndex].categoryDetail[this.currentType]}},activated:function(){this.$refs.scroll.scrollBackTop(0,this.saveY,0)},deactivated:function(){},watch:{saveY:function(){this.$refs.scroll.scrollBackTop(0,this.saveY,0)}},methods:{_getCategory:function(){var t=this;Y().then((function(e){t.categories=e.data.category.list;for(var a=0;a<t.categories.length;a++)t.categoryData[a]={subcategories:{},categoryDetail:{pop:[],new:[],sell:[]}};t._getSubcategories(0)}))},_getSubcategories:function(t){var e=this;this.currentIndex=t;var a=this.categories[t].maitKey;V(a).then((function(a){e.categoryData[t].subcategories=a.data,e.categoryData=W({},e.categoryData),e._getCategoryDetail(L["c"]),e._getCategoryDetail(L["d"]),e._getCategoryDetail(L["b"])}))},_getCategoryDetail:function(t){var e=this,a=this.categories[this.currentIndex].miniWallkey;G(a,t).then((function(a){e.categoryData[e.currentIndex].categoryDetail[t]=a,e.categoryData=W({},e.categoryData)}))},selectItem:function(t){this._getSubcategories(t)},contentScroll:function(t){this.isshowBackTop=-t.y>1e3,this.saveY=this.$refs.scroll.getScrollY(),this.$refs.scroll.refresh()},backClick:function(){this.$refs.scroll.scrollBackTop(0,0)}}},J=F,R=(a("3fd0"),Object(b["a"])(J,r,n,!1,null,"2a5a2e1e",null));e["default"]=R.exports},e94c:function(t,e,a){"use strict";a("172d")},f1ae:function(t,e,a){"use strict";var r=a("86cc"),n=a("4630");t.exports=function(t,e,a){e in t?r.f(t,e,n(0,a)):t[e]=a}}}]);
//# sourceMappingURL=chunk-3aad1847.e544f02e.js.map